// XHRFormSubmitter (c) 2014 Ionică Bizău :: https://github.com/IonicaBizau/xhr-form-submitter.js
(function(e){var t=function(e){var t=this;t._form=e.form,t.getFormData=function(e){for(var a=t._form.querySelectorAll("[name]"),n={},r=0;a.length>r;++r){var c=a[r],o=c.getAttribute("type"),s=c.getAttribute("name"),u=null;switch(o){case"button":case"text":case"url":case"date":case"color":case"datetime":case"datetime-local":case"email":case"file":case"hidden":case"month":case"number":case"password":case"range":case"search":case"submit":case"tel":case"time":case"week":u=c.value;break;case"checkbox":u=c.checked;break;case"image":u=c.getAttribute("src");break;case"radio":u=document.querySelector("input[name='"+s+"']:checked").value;break;default:console.warn("Unhandled type: ",o)}n[s]=u}if(!e)return n;e="";for(var i in n)e+=encodeURIComponent(i)+"="+encodeURIComponent(n[i])+"&";return e=e.substr(0,e.length-1)},t.submit=function(e,a){"function"==typeof e&&(a=e,e=void 0),e=Object(e),a=a||function(){};var n=new XMLHttpRequest,r=t._form,c=e.actionUrl||r.getAttribute("action"),o=e.method||r.getAttribute("method"),s=t.getFormData(!0);return n.open(o,c),n.setRequestHeader("content-type","text/plain; charset=utf-8"),n.onreadystatechange=function(){return 4===n.readyState?n.status>=400?a(n.responseText,null):(a(null,n.responseText),void 0):void 0},n.send(s),n}};e.XHRFormSubmitter=t})(window);
